
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speak up! - English Pronunciation Coach</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.11.0",
    "react/": "https://esm.sh/react@^19.1.1/"
  }
}
</script>
</head>
<body>
    <div id="login-screen">
        <div class="login-box">
            <h1>Speak up!</h1>
            <p class="description">学習を開始するにはGoogleアカウントでログインしてください。</p>
            <div id="google-signin-button"></div>
            <p class="login-note">@seibudai-chiba.jp のドメインを持つアカウントのみ利用できます。</p>
        </div>
    </div>

    <main id="app" class="hidden">
        <header class="app-header">
             <div id="user-profile" class="hidden">
                 <span id="user-name"></span>
                 <img id="user-avatar" src="" alt="User Avatar">
                 <button id="signout-btn">サインアウト</button>
            </div>
            <h1>Speak up!</h1>
            <p class="description">Your Personal AI English Pronunciation Coach</p>
        </header>
        
        <section class="practice-section">
            <div id="sentence-container">
                 <textarea id="sentence-input" placeholder="ここに評価したい英文を入力するか、下のボタンから選んでください..."></textarea>
                 <button id="clear-sentence-btn" class="clear-btn hidden" aria-label="テキストを消去">&times;</button>
            </div>
            <div class="controls">
                <button id="record-btn" aria-label="録音を開始" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/></svg>
                </button>
                <button id="play-model-btn" aria-label="お手本の音声を聞く" disabled>
                     <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                </button>
            </div>
            <button id="select-sentence-btn" class="select-sentence-btn">例文を選ぶ</button>
        </section>
        
        <section id="results-section" class="hidden">
            <h2>Results (評価結果)</h2>
            <div id="loader" class="hidden">
                <div class="spinner"></div>
                <p>AIがあなたのスピーチを評価中です...</p>
            </div>
            <div id="results-content">
                <div class="scores-grid">
                    <div class="score-card">
                        <h3>Pronunciation<span class="ja-label">(発音の正確さ)</span></h3>
                         <div class="score-display">
                            <div class="score-gauge-container">
                                <div id="pronunciation-gauge" class="score-gauge-bar"></div>
                            </div>
                            <p id="pronunciation-score" class="score-value">0/10</p>
                        </div>
                    </div>
                    <div class="score-card">
                        <h3>Fluency<span class="ja-label">(流暢さ)</span></h3>
                         <div class="score-display">
                            <div class="score-gauge-container">
                                <div id="fluency-gauge" class="score-gauge-bar"></div>
                            </div>
                            <p id="fluency-score" class="score-value">0/10</p>
                        </div>
                    </div>
                    <div class="score-card">
                        <h3>Intonation<span class="ja-label">(イントネーション)</span></h3>
                         <div class="score-display">
                            <div class="score-gauge-container">
                                <div id="intonation-gauge" class="score-gauge-bar"></div>
                            </div>
                            <p id="intonation-score" class="score-value">0/10</p>
                        </div>
                    </div>
                </div>
                <div id="overall-score-display" class="feedback-card">
                    <h3>Overall Score (総合評価)</h3>
                    <div class="circular-progress-container">
                      <svg class="circular-progress" viewBox="0 0 120 120">
                        <circle class="progress-bg" cx="60" cy="60" r="54" />
                        <circle id="overall-progress-circle" class="progress-bar" cx="60" cy="60" r="54" />
                      </svg>
                      <div class="score-text-container">
                          <span id="overall-score-value">0</span>
                          <span class="score-text-unit">/ 30</span>
                      </div>
                    </div>
                </div>
                 <div class="feedback-card">
                    <h3>Transcription (書き起こし)</h3>
                    <div id="transcription-text" class="transcription-container"></div>
                </div>
                <div class="feedback-card">
                    <h3>Advice (アドバイス)</h3>
                    <p id="advice-text"></p>
                </div>
            </div>
        </section>
    </main>
    
    <div id="sentence-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>例文を選択</h3>
                <button id="close-modal-btn" aria-label="閉じる">&times;</button>
            </div>
            <div class="modal-tabs">
                <button class="modal-tab-btn active" data-tab="factbook">FACTBOOK</button>
                <button class="modal-tab-btn" data-tab="myway">MY WAY</button>
            </div>
            <div class="modal-body">
                <div id="factbook-content" class="modal-tab-content active">
                    <div id="factbook-list"></div>
                </div>
                <div id="myway-content" class="modal-tab-content">
                    <div id="myway-list"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module" src="index.tsx"></script>
</body>
</html>